# OpenAPI (Swagger) からの TypeScript クライアント自動生成手法

`public/openapi.json` を元に、Frontend (`frontend/`) 用の型安全な HTTP クライアントを自動生成する手法を比較・提案します。

## 1. openapi-typescript-codegen
非常にポピュラーで、設定不要ですぐに使えるツールです。

- **特徴**:
    - `fetch` API をラップしたサービスクラスを生成します。
    - 依存関係が少なく、生成後のコードが読みやすい。
- **導入**:
    ```bash
    npm install -D openapi-typescript-codegen
    ```
- **生成コマンド例**:
    ```bash
    npx openapi-typescript-codegen --input ../public/openapi.json --output ./src/client --client fetch
    ```

## 2. Orval
React Query (TanStack Query) との親和性が非常に高いツールです。

- **特徴**:
    - React Query の Hooks (`useQuery`, `useMutation` 等) を直接生成できます。
    - データフェッチの状態管理まで自動化したい場合に最適。
    - `axios` またはカスタム `fetch` インスタンスを使用可能。
- **導入**:
    ```bash
    npm install -D orval
    ```
- **設定 (`orval.config.ts`)**:
    ```typescript
    module.exports = {
      petstore: {
        input: '../public/openapi.json',
        output: './src/client.ts',
        mode: 'tags-split',
      },
    };
    ```

## 3. Aspida (openapi2aspida)
日本発のツールで、API 定義を型パズルで表現し、非常に強力な型推論を提供します。

- **特徴**:
    - ディレクトリ構造に基づいた API クライアント (`client.user._userId(id).get()`)。
    - RESTful な API 構造と相性が良い。
- **導入**:
    ```bash
    npm install -D openapi2aspida @aspida/fetch
    ```
- **生成**:
    ```bash
    npx openapi2aspida -i ../public/openapi.json -o ./src/api
    ```

## 4. @openapitools/openapi-generator-cli
Java 製の公式ジェネレータ。歴史が長く、あらゆる言語に対応していますが、生成されるコードが重厚になりがちです。

- **特徴**:
    - 非常に多機能だが、TypeScript フロントエンド用としては少し過剰（Overkill）な場合が多い。
    - Java ランタイムが必要。

---

## 推奨事項

### ケース A: シンプルに `fetch` できる関数が欲しい場合
👉 **`openapi-typescript-codegen`**
最も手軽で、生成されるコードもシンプルです。「とりあえず型安全に API を叩きたい」というニーズに合致します。

### ケース B: React Query (SWR) を活用する場合
👉 **`Orval`**
コンポーネントから `const { data } = useStepExists(...)` のように直感的に呼び出せるため、開発効率が劇的に向上します。

### 今回のプロジェクトへの適用案
現在のプロジェクト構成（Vite + React）を考慮すると、**`openapi-typescript-codegen`** が導入コストが低く、おすすめです。もし React Query を既に導入している、あるいは導入予定であれば **`Orval`** が強力な選択肢になります。
